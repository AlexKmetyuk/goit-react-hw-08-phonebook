(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{10:function(e,t,r){"use strict";r.d(t,"i",(function(){return c})),r.d(t,"j",(function(){return a})),r.d(t,"h",(function(){return o})),r.d(t,"b",(function(){return u})),r.d(t,"c",(function(){return s})),r.d(t,"a",(function(){return i})),r.d(t,"f",(function(){return b})),r.d(t,"g",(function(){return j})),r.d(t,"e",(function(){return l})),r.d(t,"d",(function(){return O}));var n=r(2),c=Object(n.b)("phonebook/fetchContactRequest"),a=Object(n.b)("phonebook/fetchContactSuccess"),o=Object(n.b)("phonebook/fetchContactError"),u=Object(n.b)("phonebook/addContactRequest"),s=Object(n.b)("phonebook/addContactSuccess"),i=Object(n.b)("phonebook/addContactError"),b=Object(n.b)("phonebook/deleteContactRequest"),j=Object(n.b)("phonebook/deleteContactSuccess"),l=Object(n.b)("phonebook/deleteContactError"),O=Object(n.b)("phonebook/changeFilter")},105:function(e,t,r){"use strict";r.r(t);var n,c,a,o,u,s,i=r(0),b=r.n(i),j=r(25),l=r.n(j),O=r(19),h=r(33),f=r(34),g=r(36),d=r(35),p=r(16),v=r(21),m=r(24),x=(r(77),r(1)),k={onLogout:m.a.logout},C=Object(p.b)((function(e){return{isAuth:v.a.getIsAuth(e),username:v.a.getUsername(e)}}),k)((function(e){var t=e.isAuth,r=e.username,n=e.onLogout;return Object(x.jsx)("header",{children:Object(x.jsxs)("nav",{children:[Object(x.jsxs)("div",{children:[Object(x.jsx)(O.b,{className:"nav--btn",activeClassName:"nav--btn__active",to:"/home",children:"HOME"}),t&&Object(x.jsx)(O.b,{className:"nav--btn",activeClassName:"nav--btn__active",to:"/contacts",children:"PHONEBOOK"})]}),Object(x.jsx)("div",{className:"user-nav",children:t?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("span",{style:{margin:0,marginRight:10},children:["Welcome, ",r,"!"]}),Object(x.jsx)("button",{type:"button",onClick:n,children:"Logout"})]}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(O.b,{to:"/register",className:"user-btn",activeClassName:"user-btn-active",children:"Register"}),Object(x.jsx)(O.b,{to:"/login",className:"user-btn",activeClassName:"user-btn-active",children:"Login"})]})})]})})})),y=(r(83),r(6)),S=r(15),E=r(27),U=Object(p.b)((function(e){return{isAuth:v.a.getIsAuth(e)}}))((function(e){var t=e.component,r=e.isAuth,n=e.redirectTo,c=Object(E.a)(e,["component","isAuth","redirectTo"]);return Object(x.jsx)(y.b,Object(S.a)(Object(S.a)({},c),{},{render:function(e){return r?Object(x.jsx)(t,Object(S.a)({},e)):Object(x.jsx)(y.a,{to:n})}}))})),R=Object(p.b)((function(e){return{isAuth:v.a.getIsAuth(e)}}))((function(e){var t=e.component,r=e.isAuth,n=e.redirectTo,c=Object(E.a)(e,["component","isAuth","redirectTo"]);return Object(x.jsx)(y.b,Object(S.a)(Object(S.a)({},c),{},{render:function(e){return r&&c.restricted?Object(x.jsx)(y.a,{to:n}):Object(x.jsx)(t,Object(S.a)({},e))}}))})),A=r(46),q=r.n(A),w=(r(102),Object(i.lazy)((function(){return r.e(3).then(r.bind(null,107))}))),N=Object(i.lazy)((function(){return r.e(5).then(r.bind(null,110))})),T=Object(i.lazy)((function(){return r.e(6).then(r.bind(null,108))})),z=Object(i.lazy)((function(){return r.e(4).then(r.bind(null,109))})),L=function(e){Object(g.a)(r,e);var t=Object(d.a)(r);function r(){var e;Object(h.a)(this,r);for(var n=arguments.length,c=new Array(n),a=0;a<n;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).changeFilter=function(t){e.setState({filter:t.currentTarget.value})},e}return Object(f.a)(r,[{key:"componentDidMount",value:function(){this.props.onGetCurrentUser()}},{key:"render",value:function(){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(C,{}),Object(x.jsx)(i.Suspense,{fallback:Object(x.jsx)("div",{style:{textAlign:"center",paddingTop:150},children:Object(x.jsx)(q.a,{type:"Circles"})}),children:Object(x.jsxs)(y.d,{children:[Object(x.jsx)(y.b,{path:"/home",component:w}),Object(x.jsx)(U,{path:"/contacts",component:N,redirectTo:"/login"}),Object(x.jsx)(R,{path:"/register",component:T,restricted:!0,redirectTo:"/home"}),Object(x.jsx)(R,{path:"/login",component:z,restricted:!0,redirectTo:"/contacts"})]})})]})}}]),r}(i.Component),F={onGetCurrentUser:m.a.getCurrentUser},I=Object(p.b)(null,F)(L),_=r(47),B=r(28),M=r(2),G=r(18),H=r(48),J=r.n(H),D=r(3),K=r(9),P=r(10),W=Object(M.c)([],(n={},Object(D.a)(n,P.j,(function(e,t){return t.payload})),Object(D.a)(n,P.c,(function(e,t){var r=t.payload;return[].concat(Object(B.a)(e),[r])})),Object(D.a)(n,P.g,(function(e,t){var r=t.payload;return e.filter((function(e){return e.id!==r}))})),n)),Q=Object(M.c)(!1,(c={},Object(D.a)(c,P.i,(function(){return!0})),Object(D.a)(c,P.j,(function(){return!1})),Object(D.a)(c,P.h,(function(){return!1})),Object(D.a)(c,P.b,(function(){return!0})),Object(D.a)(c,P.c,(function(){return!1})),Object(D.a)(c,P.a,(function(){return!1})),Object(D.a)(c,P.f,(function(){return!0})),Object(D.a)(c,P.g,(function(){return!1})),Object(D.a)(c,P.e,(function(){return!1})),c)),V=Object(M.c)("",Object(D.a)({},P.d,(function(e,t){return t.payload}))),X=Object(K.b)({contacts:W,filter:V,loading:Q}),Y=r(4),Z={name:null,email:null},$=Object(M.c)(Z,(a={},Object(D.a)(a,Y.a.registerSuccess,(function(e,t){return t.payload.user})),Object(D.a)(a,Y.a.loginSuccess,(function(e,t){return t.payload.user})),Object(D.a)(a,Y.a.logoutSuccess,(function(){return Z})),Object(D.a)(a,Y.a.getCurrentUserSuccess,(function(e,t){return t.payload})),a)),ee=Object(M.c)(!1,(o={},Object(D.a)(o,Y.a.registerSuccess,(function(){return!0})),Object(D.a)(o,Y.a.loginSuccess,(function(){return!0})),Object(D.a)(o,Y.a.logoutSuccess,(function(){return!1})),Object(D.a)(o,Y.a.getCurrentUserSuccess,(function(){return!0})),Object(D.a)(o,Y.a.registerError,(function(){return!1})),Object(D.a)(o,Y.a.loginError,(function(){return!1})),Object(D.a)(o,Y.a.getCurrentUserError,(function(){return!1})),o)),te=Object(M.c)(null,(u={},Object(D.a)(u,Y.a.registerSuccess,(function(e,t){return t.payload.token})),Object(D.a)(u,Y.a.loginSuccess,(function(e,t){return t.payload.token})),Object(D.a)(u,Y.a.logoutSuccess,(function(){return""})),u)),re=Object(M.c)(null,(s={},Object(D.a)(s,Y.a.registerError,(function(e,t){return t.payload})),Object(D.a)(s,Y.a.loginError,(function(e,t){return t.payload})),Object(D.a)(s,Y.a.logoutError,(function(e,t){return t.payload})),Object(D.a)(s,Y.a.getCurrentUserError,(function(e,t){return t.payload})),s)),ne=Object(K.b)({user:$,isLogin:ee,token:te,error:re}),ce=Object(B.a)(Object(M.d)({serializableCheck:{ignoredActions:[G.a,G.f,G.b,G.c,G.d,G.e]}})),ae={key:"auth",storage:J.a,whitelist:["token"]},oe=Object(M.a)({reducer:{auth:Object(G.g)(ae,ne),phonebook:X},middleware:ce,devTools:!1}),ue={store:oe,persistor:Object(G.h)(oe)};l.a.render(Object(x.jsx)(O.a,{children:Object(x.jsx)(b.a.StrictMode,{children:Object(x.jsx)(p.a,{store:ue.store,children:Object(x.jsx)(_.a,{persistor:ue.persistor,children:Object(x.jsx)(I,{})})})})}),document.getElementById("root"))},21:function(e,t,r){"use strict";t.a={getIsAuth:function(e){return e.auth.isLogin},getUsername:function(e){return e.auth.user.name}}},24:function(e,t,r){"use strict";var n=r(17),c=r.n(n),a=r(23),o=r(20),u=r.n(o),s=r(4);u.a.defaults.baseURL="https://connections-api.herokuapp.com";var i=function(e){u.a.defaults.headers.common.Authorization="Bearer ".concat(e)},b=function(){u.a.defaults.headers.common.Authorization=""};t.a={register:function(e){return function(){var t=Object(a.a)(c.a.mark((function t(r){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(s.a.registerRequest()),t.prev=1,t.next=4,u.a.post("/users/signup",e);case 4:n=t.sent,i(n.data.token),r(s.a.registerSuccess(n.data)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),r(s.a.registerError(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},login:function(e){return function(){var t=Object(a.a)(c.a.mark((function t(r){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(s.a.loginRequest()),t.prev=1,t.next=4,u.a.post("/users/login",e);case 4:n=t.sent,i(n.data.token),r(s.a.loginSuccess(n.data)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),r(s.a.loginError(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},logout:function(){return function(){var e=Object(a.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(s.a.logoutRequest()),e.prev=1,e.next=4,u.a.post("/users/logout");case 4:b(),t(s.a.logoutSuccess()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t(s.a.logoutError(e.t0));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},getCurrentUser:function(){return function(){var e=Object(a.a)(c.a.mark((function e(t,r){var n,a,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r(),a=n.auth.token){e.next=3;break}return e.abrupt("return");case 3:return i(a),t(s.a.getCurrentUserRequest()),e.prev=5,e.next=8,u.a.get("/users/current");case 8:o=e.sent,t(s.a.getCurrentUserSuccess(o.data)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),t(s.a.getCurrentUserError(e.t0.message));case 15:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t,r){return e.apply(this,arguments)}}()}}},4:function(e,t,r){"use strict";var n=r(2),c=Object(n.b)("auth/registerRequest"),a=Object(n.b)("auth/registerSuccess"),o=Object(n.b)("auth/registerError"),u=Object(n.b)("auth/loginRequest"),s=Object(n.b)("auth/loginSuccess"),i=Object(n.b)("auth/loginError"),b=Object(n.b)("auth/logoutRequest"),j=Object(n.b)("auth/logoutSuccess"),l=Object(n.b)("auth/logoutError"),O=Object(n.b)("auth/getCurrentUserRequest"),h=Object(n.b)("auth/getCurrentUserSuccess"),f=Object(n.b)("auth/getCurrentUserError");t.a={registerRequest:c,registerSuccess:a,registerError:o,loginRequest:u,loginSuccess:s,loginError:i,logoutRequest:b,logoutSuccess:j,logoutError:l,getCurrentUserRequest:O,getCurrentUserSuccess:h,getCurrentUserError:f}},77:function(e,t,r){},83:function(e,t,r){}},[[105,1,2]]]);
//# sourceMappingURL=main.4ed6970b.chunk.js.map